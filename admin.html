<!DOCTYPE html>
<html>
<head>
    <title>Quotely Admin</title>
    <style>
        /* Admin styles */
        body { font-family: Arial; max-width: 1200px; margin: 0 auto; padding: 20px; }
        .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin: 20px 0; }
        .stat-card { background: #f5f5f5; padding: 20px; border-radius: 8px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
    </style>
</head>
<body>
    <h1>Quotely Admin Dashboard</h1>
    
    <div id="stats" class="stats-grid">
        <!-- Stats will load here -->
    </div>
    
    <h2>Manage Quotes</h2>
    <table id="quotesTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>Quote</th>
                <th>Author</th>
                <th>Category</th>
                <th>Likes</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <!-- Quotes will load here -->
        </tbody>
    </table>
    
    <script>
        // Simple password protection
        const password = prompt('Enter admin password:');
        if (password !== 'QuotelyAdmin2024') {
            alert('Invalid password');
            window.location.href = '/';
        }
        
        // Load admin data
        async function loadAdminData() {
            const response = await fetch('/.netlify/functions/admin-stats');
            const data = await response.json();
            
            // Display stats
            document.getElementById('stats').innerHTML = `
                <div class="stat-card">
                    <h3>Total Quotes</h3>
                    <p>${data.stats.total_quotes}</p>
                </div>
                <div class="stat-card">
                    <h3>Unique Authors</h3>
                    <p>${data.stats.unique_authors}</p>
                </div>
                <div class="stat-card">
                    <h3>Total Likes</h3>
                    <p>${data.stats.total_likes}</p>
                </div>
                <div class="stat-card">
                    <h3>Categories</h3>
                    <p>${data.stats.categories_count}</p>
                </div>
            `;
            
            // Load quotes
            const quotesResponse = await fetch('/.netlify/functions/get-quotes?limit=50');
            const quotes = await quotesResponse.json();
            
            const tableBody = document.querySelector('#quotesTable tbody');
            tableBody.innerHTML = quotes.map(quote => `
                <tr>
                    <td>${quote.id}</td>
                    <td>${quote.text.substring(0, 50)}...</td>
                    <td>${quote.author}</td>
                    <td>${quote.category}</td>
                    <td>${quote.likes}</td>
                    <td>
                        <button onclick="editQuote(${quote.id})">Edit</button>
                        <button onclick="deleteQuote(${quote.id})">Delete</button>
                    </td>
                </tr>
            `).join('');
        }
        
        loadAdminData();
    </script>
</body>
  </html>
